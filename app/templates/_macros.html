{% macro prompt(title, name, value=None) %}
<div class="prompt-container">
    <h3>{{ title }}</h3>
    <select class="searchable-dropdown main-dropdown" id="main-dropdown-{{ name }}" name="{{ name }}-option">
        <option value="" disabled {% if not value or not value.get(name + '-option') %}selected{% endif %}>
            Select an option
        </option>
        <optgroup label="Career Options">
            <option value="avg_career" {% if value and value.get(name + '-option') == 'avg_career' %}selected{% endif %}>AVG Career</option>
            <option value="era_career" {% if value and value.get(name + '-option') == 'era_career' %}selected{% endif %}>ERA Career</option>
            <option value="wins_career" {% if value and value.get(name + '-option') == 'wins_career' %}selected{% endif %}>Wins Career</option>
            <option value="k_career" {% if value and value.get(name + '-option') == 'k_career' %}selected{% endif %}>K Career</option>
            <option value="hits_career" {% if value and value.get(name + '-option') == 'hits_career' %}selected{% endif %}>Hits Career</option>
            <option value="hr_career" {% if value and value.get(name + '-option') == 'hr_career' %}selected{% endif %}>HR Career</option>
            <option value="save_career" {% if value and value.get(name + '-option') == 'save_career' %}selected{% endif %}>Save Career</option>
            <option value="war_career" {% if value and value.get(name + '-option') == 'war_career' %}selected{% endif %}>WAR Career</option>
        </optgroup>
        <optgroup label="Season Options">
            <option value="avg_season" {% if value and value.get(name + '-option') == 'avg_season' %}selected{% endif %}>AVG Season</option>
            <option value="era_season" {% if value and value.get(name + '-option') == 'era_season' %}selected{% endif %}>ERA Season</option>
            <option value="hr_season" {% if value and value.get(name + '-option') == 'hr_season' %}selected{% endif %}>HR Season</option>
            <option value="win_season" {% if value and value.get(name + '-option') == 'win_season' %}selected{% endif %}>Win Season</option>
            <option value="rbi_season" {% if value and value.get(name + '-option') == 'rbi_season' %}selected{% endif %}>RBI Season</option>
            <option value="run_season" {% if value and value.get(name + '-option') == 'run_season' %}selected{% endif %}>Run Season</option>
            <option value="hits_season" {% if value and value.get(name + '-option') == 'hits_season' %}selected{% endif %}>Hits Season</option>
            <option value="k_season" {% if value and value.get(name + '-option') == 'k_season' %}selected{% endif %}>K Season</option>
            <option value="hr_sb_season" {% if value and value.get(name + '-option') == 'hr_sb_season' %}selected{% endif %}>HR / SB Season</option>
            <option value="save_season" {% if value and value.get(name + '-option') == 'save_season' %}selected{% endif %}>Save Season</option>
            <option value="war_season" {% if value and value.get(name + '-option') == 'war_season' %}selected{% endif %}>WAR Season</option>
        </optgroup>
        <optgroup label="Team Options">
            <option value="played_for_team" {% if value and value.get(name + '-option') == 'played_for_team' %}selected{% endif %}>Played For Team</option>
        </optgroup>
        <optgroup label="Position options">
            <option value="designated_hitter" {% if value and value.get(name + '-option') == 'designated_hitter' %}selected{% endif %}>Designated Hitter</option>
            <option value="pitched" {% if value and value.get(name + '-option') == 'pitched' %}selected{% endif %}>Pitched</option>
            <option value="played_catcher" {% if value and value.get(name + '-option') == 'played_catcher' %}selected{% endif %}>Played Catcher</option>
            <option value="played_center_field" {% if value and value.get(name + '-option') == 'played_center_field' %}selected{% endif %}>Played Center Field</option>
            <option value="played_first_base" {% if value and value.get(name + '-option') == 'played_first_base' %}selected{% endif %}>Played First Base</option>
            <option value="played_left_field" {% if value and value.get(name + '-option') == 'played_left_field' %}selected{% endif %}>Played Left Field</option>
            <option value="played_outfield" {% if value and value.get(name + '-option') == 'played_outfield' %}selected{% endif %}>Played Outfield</option>
            <option value="played_right_field" {% if value and value.get(name + '-option') == 'played_right_field' %}selected{% endif %}>Played Right Field</option>
            <option value="played_second_base" {% if value and value.get(name + '-option') == 'played_second_base' %}selected{% endif %}>Played Second Base</option>
            <option value="played_shortstop" {% if value and value.get(name + '-option') == 'played_shortstop' %}selected{% endif %}>Played Shortstop</option>
            <option value="played_third_base" {% if value and value.get(name + '-option') == 'played_third_base' %}selected{% endif %}>Played Third Base</option>
        </optgroup>
        <optgroup label="Miscellaneous">
            <option value="all_star" {% if value and value.get(name + '-option') == 'all_star' %}selected{% endif %}>All Star</option>
            <option value="born_outside_us" {% if value and value.get(name + '-option') == 'born_outside_us' %}selected{% endif %}>Born Outside US 50 States and DC</option>
            <option value="cy_young" {% if value and value.get(name + '-option') == 'cy_young' %}selected{% endif %}>Cy Young</option>
            <option value="first_round_draft_pick" {% if value and value.get(name + '-option') == 'first_round_draft_pick' %}selected{% endif %}>First Round Draft Pick</option>
            <option value="gold_glove" {% if value and value.get(name + '-option') == 'gold_glove' %}selected{% endif %}>Gold Glove</option>
            <option value="hall_of_fame" {% if value and value.get(name + '-option') == 'hall_of_fame' %}selected{% endif %}>Hall of Fame</option>
            <option value="mvp" {% if value and value.get(name + '-option') == 'mvp' %}selected{% endif %}>MVP</option>
            <option value="only_one_team" {% if value and value.get(name + '-option') == 'only_one_team' %}selected{% endif %}>Only One Team</option>
            <option value="rookie_of_the_year" {% if value and value.get(name + '-option') == 'rookie_of_the_year' %}selected{% endif %}>Rookie of the Year</option>
            <option value="silver_slugger" {% if value and value.get(name + '-option') == 'silver_slugger' %}selected{% endif %}>Silver Slugger</option>
            <option value="threw_a_no_hitter" {% if value and value.get(name + '-option') == 'threw_a_no_hitter' %}selected{% endif %}>Threw a Noâ€‘Hitter</option>
            <option value="world_series_champ" {% if value and value.get(name + '-option') == 'world_series_champ' %}selected{% endif %}>World Series Champ</option>
        </optgroup>
    </select>

    <!-- Additional dropdowns -->
    <div class="additional-dropdowns" id="addition-dropdowns-{{ name }}" name="addition-dropdowns-{{ name }}">
        <div class="additional-dropdown" id="additional-dropdown-team-{{ name }}" style="display: none;">
            <h4>Select Team</h4>
            {{ team_dropdown(name, value.get(name + '-team') if value else None) }}
        </div>
        <div class="additional-dropdown" id="additional-dropdown-operator-{{ name }}" style="display: none;">
            <h4>Select Operator</h4>
            <select class="searchable-dropdown" name="{{ name }}-operator">
                <option value="" disabled {% if not value or not value.get(name + '-operator') %}selected{% endif %}>Select an operator</option>
                <option value="greater_than" {% if value and value.get(name + '-operator') == 'greater_than' %}selected{% endif %}>Greater Than</option>
                <option value="less_than" {% if value and value.get(name + '-operator') == 'less_than' %}selected{% endif %}>Less Than</option>
            </select>
        </div>
        <div class="additional-dropdown" id="additional-dropdown-number-{{ name }}" style="display: none;">
            <h4>Enter Number</h4>
            <input type="number" class="number-input" step="any" min="0" placeholder="Enter a number" name="{{ name }}-number" value="{{ value.get(name + '-number') if value else '' }}">
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        // Configuration object for dropdown options
        const optionConfig = {
            played_for_team: ["team"],
            only_one_team: ["one_team"],
            avg_career: ["operator", "number"],
            era_career: ["operator", "number"],
            wins_career: ["operator", "number"],
            k_career: ["operator", "number"],
            hits_career: ["operator", "number"],
            hr_career: ["operator", "number"],
            save_career: ["operator", "number"],
            war_career: ["operator", "number"],
            avg_season: ["operator", "number"],
            era_season: ["operator", "number"],
            hr_season: ["operator", "number"],
            win_season: ["operator", "number"],
            rbi_season: ["operator", "number"],
            run_season: ["operator", "number"],
            hits_season: ["operator", "number"],
            k_season: ["operator", "number"],
            hr_sb_season: ["operator", "number"],
            save_season: ["operator", "number"],
            war_season: ["operator", "number"]
        };

        function updateDropdowns(name) {
            const selectedValue = $(`#main-dropdown-${name}`).val();
            const additionalInputs = optionConfig[selectedValue] || [];

            // Show or hide "team" input
            $(`#additional-dropdown-team-${name}`).toggle(additionalInputs.includes("team") || additionalInputs.includes("one_team"));

            // Show or hide "operator" input
            $(`#additional-dropdown-operator-${name}`).toggle(additionalInputs.includes("operator"));

            // Show or hide "number" input
            $(`#additional-dropdown-number-${name}`).toggle(additionalInputs.includes("number"));
        }

        // Attach event listener to main dropdown
        $('.main-dropdown').on('change select2:unselect select2:clear', function() {
            const dropdownName = $(this).attr('id').replace('main-dropdown-', '');
            updateDropdowns(dropdownName);
        });

        // Initialize Select2
        $('.searchable-dropdown').select2({
            placeholder: "Select an option",
            allowClear: true
        });

        // Initial check for all dropdowns
        $('.main-dropdown').each(function() {
            const dropdownName = $(this).attr('id').replace('main-dropdown-', '');
            updateDropdowns(dropdownName);
        });
    });
</script>


{% endmacro %}

{% macro team_dropdown(name, value=None) %}
<select class="searchable-dropdown" name="{{ name }}-team">
    <option value="" disabled {% if not value %}selected{% endif %}>Select a team</option>
    <option value="altoona_mountain_city" {% if value == 'altoona_mountain_city' %}selected{% endif %}>Altoona Mountain City</option>
    <option value="anaheim_angels" {% if value == 'anaheim_angels' %}selected{% endif %}>Anaheim Angels</option>
    <option value="arizona_diamondbacks" {% if value == 'arizona_diamondbacks' %}selected{% endif %}>Arizona Diamondbacks</option>
    <option value="atlanta_braves" {% if value == 'atlanta_braves' %}selected{% endif %}>Atlanta Braves</option>
    <option value="baltimore_canaries" {% if value == 'baltimore_canaries' %}selected{% endif %}>Baltimore Canaries</option>
    <option value="baltimore_marylands" {% if value == 'baltimore_marylands' %}selected{% endif %}>Baltimore Marylands</option>
    <option value="baltimore_monumentals" {% if value == 'baltimore_monumentals' %}selected{% endif %}>Baltimore Monumentals</option>
    <option value="baltimore_orioles" {% if value == 'baltimore_orioles' %}selected{% endif %}>Baltimore Orioles</option>
    <option value="baltimore_terrapins" {% if value == 'baltimore_terrapins' %}selected{% endif %}>Baltimore Terrapins</option>
    <option value="boston_americans" {% if value == 'boston_americans' %}selected{% endif %}>Boston Americans</option>
    <option value="boston_beaneaters" {% if value == 'boston_beaneaters' %}selected{% endif %}>Boston Beaneaters</option>
    <option value="boston_bees" {% if value == 'boston_bees' %}selected{% endif %}>Boston Bees</option>
    <option value="boston_braves" {% if value == 'boston_braves' %}selected{% endif %}>Boston Braves</option>
    <option value="boston_doves" {% if value == 'boston_doves' %}selected{% endif %}>Boston Doves</option>
    <option value="boston_red_caps" {% if value == 'boston_red_caps' %}selected{% endif %}>Boston Red Caps</option>
    <option value="boston_red_sox" {% if value == 'boston_red_sox' %}selected{% endif %}>Boston Red Sox</option>
    <option value="boston_red_stockings" {% if value == 'boston_red_stockings' %}selected{% endif %}>Boston Red Stockings</option>
    <option value="boston_reds" {% if value == 'boston_reds' %}selected{% endif %}>Boston Reds</option>
    <option value="boston_rustlers" {% if value == 'boston_rustlers' %}selected{% endif %}>Boston Rustlers</option>
    <option value="brooklyn_atlantics" {% if value == 'brooklyn_atlantics' %}selected{% endif %}>Brooklyn Atlantics</option>
    <option value="brooklyn_bridegrooms" {% if value == 'brooklyn_bridegrooms' %}selected{% endif %}>Brooklyn Bridegrooms</option>
    <option value="brooklyn_dodgers" {% if value == 'brooklyn_dodgers' %}selected{% endif %}>Brooklyn Dodgers</option>
    <option value="brooklyn_greens" {% if value == 'brooklyn_greens' %}selected{% endif %}>Brooklyn Greens</option>
    <option value="brooklyn_robins" {% if value == 'brooklyn_robins' %}selected{% endif %}>Brooklyn Robins</option>
    <option value="brooklyn_superbas" {% if value == 'brooklyn_superbas' %}selected{% endif %}>Brooklyn Superbas</option>
    <option value="buffalo_bisons" {% if value == 'buffalo_bisons' %}selected{% endif %}>Buffalo Bisons</option>
    <option value="california_angels" {% if value == 'california_angels' %}selected{% endif %}>California Angels</option>
    <option value="chicago_cubs" {% if value == 'chicago_cubs' %}selected{% endif %}>Chicago Cubs</option>
    <option value="chicago_orphans" {% if value == 'chicago_orphans' %}selected{% endif %}>Chicago Orphans</option>
    <option value="chicago_white_sox" {% if value == 'chicago_white_sox' %}selected{% endif %}>Chicago White Sox</option>
    <option value="cincinnati_redlegs" {% if value == 'cincinnati_redlegs' %}selected{% endif %}>Cincinnati Redlegs</option>
    <option value="cincinnati_reds" {% if value == 'cincinnati_reds' %}selected{% endif %}>Cincinnati Reds</option>
    <option value="cleveland_indians" {% if value == 'cleveland_indians' %}selected{% endif %}>Cleveland Indians</option>
    <option value="cleveland_naps" {% if value == 'cleveland_naps' %}selected{% endif %}>Cleveland Naps</option>
    <option value="cleveland_spiders" {% if value == 'cleveland_spiders' %}selected{% endif %}>Cleveland Spiders</option>
    <option value="colorado_rockies" {% if value == 'colorado_rockies' %}selected{% endif %}>Colorado Rockies</option>
    <option value="detroit_tigers" {% if value == 'detroit_tigers' %}selected{% endif %}>Detroit Tigers</option>
    <option value="florida_marlins" {% if value == 'florida_marlins' %}selected{% endif %}>Florida Marlins</option>
    <option value="houston_astros" {% if value == 'houston_astros' %}selected{% endif %}>Houston Astros</option>
    <option value="houston_colt_45s" {% if value == 'houston_colt_45s' %}selected{% endif %}>Houston Colt .45s</option>
    <option value="indianapolis_hoosiers" {% if value == 'indianapolis_hoosiers' %}selected{% endif %}>Indianapolis Hoosiers</option>
    <option value="kansas_city_athletics" {% if value == 'kansas_city_athletics' %}selected{% endif %}>Kansas City Athletics</option>
    <option value="kansas_city_blues" {% if value == 'kansas_city_blues' %}selected{% endif %}>Kansas City Blues</option>
    <option value="kansas_city_cowboys" {% if value == 'kansas_city_cowboys' %}selected{% endif %}>Kansas City Cowboys</option>
    <option value="kansas_city_monarchs" {% if value == 'kansas_city_monarchs' %}selected{% endif %}>Kansas City Monarchs</option>
    <option value="kansas_city_royals" {% if value == 'kansas_city_royals' %}selected{% endif %}>Kansas City Royals</option>
    <option value="los_angeles_angels" {% if value == 'los_angeles_angels' %}selected{% endif %}>Los Angeles Angels</option>
    <option value="los_angeles_dodgers" {% if value == 'los_angeles_dodgers' %}selected{% endif %}>Los Angeles Dodgers</option>
    <option value="miami_marlins" {% if value == 'miami_marlins' %}selected{% endif %}>Miami Marlins</option>
    <option value="milwaukee_brewers" {% if value == 'milwaukee_brewers' %}selected{% endif %}>Milwaukee Brewers</option>
    <option value="milwaukee_braves" {% if value == 'milwaukee_braves' %}selected{% endif %}>Milwaukee Braves</option>
    <option value="milwaukee_cream_citys" {% if value == 'milwaukee_cream_citys' %}selected{% endif %}>Milwaukee Cream Citys</option>
    <option value="milwaukee_grays" {% if value == 'milwaukee_grays' %}selected{% endif %}>Milwaukee Grays</option>
    <option value="milwaukee_milkmen" {% if value == 'milwaukee_milkmen' %}selected{% endif %}>Milwaukee Milkmen</option>
    <option value="milwaukee_unchained" {% if value == 'milwaukee_unchained' %}selected{% endif %}>Milwaukee Unchained</option>
    <option value="minneapolis_millers" {% if value == 'minneapolis_millers' %}selected{% endif %}>Minneapolis Millers</option>
    <option value="minnesota_twins" {% if value == 'minnesota_twins' %}selected{% endif %}>Minnesota Twins</option>
    <option value="montreal_expos" {% if value == 'montreal_expos' %}selected{% endif %}>Montreal Expos</option>
    <option value="new_york_giants" {% if value == 'new_york_giants' %}selected{% endif %}>New York Giants</option>
    <option value="new_york_mets" {% if value == 'new_york_mets' %}selected{% endif %}>New York Mets</option>
    <option value="new_york_yankees" {% if value == 'new_york_yankees' %}selected{% endif %}>New York Yankees</option>
    <option value="oakland_athletics" {% if value == 'oakland_athletics' %}selected{% endif %}>Oakland Athletics</option>
    <option value="philadelphia_athletics" {% if value == 'philadelphia_athletics' %}selected{% endif %}>Philadelphia Athletics</option>
    <option value="philadelphia_phillies" {% if value == 'philadelphia_phillies' %}selected{% endif %}>Philadelphia Phillies</option>
    <option value="pittsburgh_pirates" {% if value == 'pittsburgh_pirates' %}selected{% endif %}>Pittsburgh Pirates</option>
    <option value="san_diego_padres" {% if value == 'san_diego_padres' %}selected{% endif %}>San Diego Padres</option>
    <option value="san_francisco_giants" {% if value == 'san_francisco_giants' %}selected{% endif %}>San Francisco Giants</option>
    <option value="seattle_mariners" {% if value == 'seattle_mariners' %}selected{% endif %}>Seattle Mariners</option>
    <option value="seattle_pilots" {% if value == 'seattle_pilots' %}selected{% endif %}>Seattle Pilots</option>
    <option value="st_louis_browns" {% if value == 'st_louis_browns' %}selected{% endif %}>St. Louis Browns</option>
    <option value="st_louis_cardinals" {% if value == 'st_louis_cardinals' %}selected{% endif %}>St. Louis Cardinals</option>
    <option value="tampa_bay_devil_rays" {% if value == 'tampa_bay_devil_rays' %}selected{% endif %}>Tampa Bay Devil Rays</option>
    <option value="tampa_bay_rays" {% if value == 'tampa_bay_rays' %}selected{% endif %}>Tampa Bay Rays</option>
    <option value="texas_rangers" {% if value == 'texas_rangers' %}selected{% endif %}>Texas Rangers</option>
    <option value="toronto_blue_jays" {% if value == 'toronto_blue_jays' %}selected{% endif %}>Toronto Blue Jays</option>
    <option value="washington_nationals" {% if value == 'washington_nationals' %}selected{% endif %}>Washington Nationals</option>
    <option value="washington_senators" {% if value == 'washington_senators' %}selected{% endif %}>Washington Senators</option>
</select>
{% endmacro %}
